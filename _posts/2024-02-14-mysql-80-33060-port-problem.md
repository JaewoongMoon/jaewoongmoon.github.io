
# 개요
- PC에 설치해서 사용하고 있던 로컬 환경 MySQL 서버가 어느날부터인가 MySQL Workbench 로 접속이 안되었다. 
- netstat 을 사용해서 열린포트를 확인해봤더니 원래사용하고 있던 3306 포트는 닫혀있고, 대신에 33060포트가 열려있었다. 
- 서버 버전은 MySQL 8.0이다. 

# 조사
- 33060포트는 X라는 프로토콜에서 사용하는 포트번호라고 한다. 
- MySQL Workbench에서 포트를 33060으로 변경해서 접속을 시도하면 다음과 같은 에러가 발생했다. 

![프로토콜 미스매치 문제](/images/mysql-port-33060-protocol-mismatch.png)

# 3306 포트 열기
## my.ini 파일을 생성하고 명시적으로 3306포트를 지정해본다. 

```
port=3306
bind-address = 127.0.0.1
```

MySQL 이 설치되어 있는 C:\Program Files\MySQL\MySQL Server 8.0 폴더는 관리자 권한이 있어야 파일 생성가능하다. 메모장을 관리자 권한으로 실행한 후에 파일을 생성했다. 

그러나 생성후 서버를 재구동해도 3306포트가 열리지 않았다. FW설정 문제도 아닌 것 같다. 

## my.ini 파일의 위치 추적
원인을 알았다. 

MySQL서버 설정파일은 `C:\ProgramData\MySQL\MySQL Server 8.0\my.ini`에 설정되어 있었다. 이 파일을 보니 3306포트가 3307포트로 변경되어 있었다. 아마 자신도 기억하지 못하는사이에 변경했던 것 같다. 

